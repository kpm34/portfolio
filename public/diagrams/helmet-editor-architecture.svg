<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Inter, sans-serif; font-size: 24px; font-weight: 600; fill: #ffffff; }
      .subtitle { font-family: Inter, sans-serif; font-size: 14px; font-weight: 400; fill: #a0a0a0; }
      .section-title { font-family: Inter, sans-serif; font-size: 16px; font-weight: 600; fill: #ffffff; }
      .label { font-family: Inter, sans-serif; font-size: 14px; font-weight: 500; fill: #e5e5e5; }
      .sub-label { font-family: Inter, sans-serif; font-size: 12px; fill: #a0a0a0; }
      .tech-label { font-family: Inter, sans-serif; font-size: 10px; fill: #6b7280; }
      .zone-label { font-family: Inter, sans-serif; font-size: 11px; font-weight: 500; fill: #ffffff; }
      .arrow { stroke: #3b82f6; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-dashed { stroke: #3b82f6; stroke-width: 2; fill: none; stroke-dasharray: 5,5; marker-end: url(#arrowhead); }
      .arrow-green { stroke: #10b981; stroke-width: 2; fill: none; marker-end: url(#arrowhead-green); }
      .arrow-orange { stroke: #f97316; stroke-width: 2; fill: none; marker-end: url(#arrowhead-orange); }
      .box { fill: rgba(255, 255, 255, 0.05); stroke: rgba(255, 255, 255, 0.1); stroke-width: 1; rx: 8; }
      .box-highlight { fill: rgba(59, 130, 246, 0.1); stroke: rgba(59, 130, 246, 0.3); stroke-width: 1.5; rx: 8; }
      .box-emerald { fill: rgba(16, 185, 129, 0.1); stroke: rgba(16, 185, 129, 0.3); stroke-width: 1.5; rx: 8; }
      .box-purple { fill: rgba(139, 92, 246, 0.1); stroke: rgba(139, 92, 246, 0.3); stroke-width: 1.5; rx: 8; }
      .box-orange { fill: rgba(249, 115, 22, 0.1); stroke: rgba(249, 115, 22, 0.3); stroke-width: 1.5; rx: 8; }
      .box-red { fill: rgba(239, 68, 68, 0.1); stroke: rgba(239, 68, 68, 0.3); stroke-width: 1.5; rx: 8; }
      .box-cyan { fill: rgba(6, 182, 212, 0.1); stroke: rgba(6, 182, 212, 0.3); stroke-width: 1.5; rx: 8; }
      .zone-shell { fill: #1a1a1a; stroke: #404040; }
      .zone-facemask { fill: #ef4444; stroke: #b91c1c; }
      .zone-chinstrap { fill: #22c55e; stroke: #15803d; }
      .zone-padding { fill: #3b82f6; stroke: #1d4ed8; }
      .zone-hardware { fill: #eab308; stroke: #a16207; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#3b82f6" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#10b981" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#f97316" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="900" fill="#030303"/>

  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" class="title">Helmet Editor Architecture</text>
  <text x="600" y="65" text-anchor="middle" class="subtitle">React Three Fiber + Zone-Based Customization</text>

  <!-- Zone System -->
  <g id="zone-system">
    <text x="100" y="110" class="section-title">5-Zone System (Blender Mapped)</text>

    <rect x="50" y="130" width="220" height="130" class="box"/>
    <text x="160" y="155" text-anchor="middle" class="label">GLB Zone Mapping</text>

    <rect x="70" y="170" width="16" height="16" rx="3" class="zone-shell"/>
    <text x="95" y="183" class="zone-label">Shell (main body)</text>

    <rect x="70" y="192" width="16" height="16" rx="3" class="zone-facemask"/>
    <text x="95" y="205" class="zone-label">Facemask (bars)</text>

    <rect x="70" y="214" width="16" height="16" rx="3" class="zone-chinstrap"/>
    <text x="95" y="227" class="zone-label">Chinstrap</text>

    <rect x="70" y="236" width="16" height="16" rx="3" class="zone-padding"/>
    <text x="95" y="249" class="zone-label">Padding + Hardware</text>
  </g>

  <!-- Material Finishes (Actual 4) -->
  <g id="finishes">
    <rect x="300" y="130" width="250" height="130" class="box-purple"/>
    <text x="425" y="155" text-anchor="middle" class="label">4 Material Finishes</text>
    <text x="320" y="180" class="tech-label">Glossy: clearcoat, envMap 1.0</text>
    <text x="320" y="198" class="tech-label">Matte: roughness 0.8, no metal</text>
    <text x="320" y="216" class="tech-label">Chrome: metalness 1.0, mirror</text>
    <text x="320" y="234" class="tech-label">Brushed: clearcoat + sheen</text>
    <text x="425" y="252" text-anchor="middle" class="sub-label">MeshPhysicalMaterial</text>
  </g>

  <!-- Stripe Pattern System -->
  <g id="stripe-system">
    <rect x="580" y="130" width="280" height="130" class="box-orange"/>
    <text x="720" y="155" text-anchor="middle" class="label">Stripe Pattern System</text>
    <text x="600" y="180" class="tech-label">CubicBezierCurve3 (4 control points)</text>
    <text x="600" y="198" class="tech-label">TubeGeometry (50 segments, 0.15 radius)</text>
    <text x="600" y="216" class="tech-label">Textures: single/double stripe PNG</text>
    <text x="600" y="234" class="tech-label">Color overlay + intensity control</text>
    <text x="720" y="252" text-anchor="middle" class="sub-label">3D curve follows helmet contour</text>
  </g>

  <!-- CFB Integration -->
  <g id="cfb-integration">
    <rect x="890" y="130" width="260" height="130" class="box-red"/>
    <text x="1020" y="155" text-anchor="middle" class="label">CFB Fantasy Integration</text>
    <text x="910" y="180" class="tech-label">Embedded in /studio page</text>
    <text x="910" y="198" class="tech-label">Team helmet customizations table</text>
    <text x="910" y="216" class="tech-label">Pro feature for team branding</text>
    <text x="910" y="234" class="tech-label">Supabase + RLS policies</text>
    <text x="1020" y="252" text-anchor="middle" class="sub-label">Save/load helmet configs</text>
  </g>

  <!-- React Three Fiber Canvas -->
  <g id="r3f-layer">
    <text x="100" y="310" class="section-title">React Three Fiber Canvas</text>

    <rect x="50" y="330" width="700" height="170" class="box-cyan"/>
    <text x="400" y="360" text-anchor="middle" class="label">HelmetScene.tsx</text>

    <!-- GLB Loading -->
    <rect x="70" y="380" width="150" height="100" class="box"/>
    <text x="145" y="405" text-anchor="middle" class="sub-label">GLB Model</text>
    <text x="90" y="425" class="tech-label">useGLTF loader</text>
    <text x="90" y="443" class="tech-label">helmet_matte_FINAL.glb</text>
    <text x="90" y="461" class="tech-label">1.66MB optimized</text>

    <!-- Material Application -->
    <rect x="240" y="380" width="160" height="100" class="box"/>
    <text x="320" y="405" text-anchor="middle" class="sub-label">Material System</text>
    <text x="260" y="425" class="tech-label">MeshPhysicalMaterial</text>
    <text x="260" y="443" class="tech-label">Zone name matching</text>
    <text x="260" y="461" class="tech-label">Per-zone properties</text>

    <!-- Lighting -->
    <rect x="420" y="380" width="150" height="100" class="box"/>
    <text x="495" y="405" text-anchor="middle" class="sub-label">Lighting</text>
    <text x="440" y="425" class="tech-label">3 directional + 1 point</text>
    <text x="440" y="443" class="tech-label">Environment: studio</text>
    <text x="440" y="461" class="tech-label">ACES tone mapping</text>

    <!-- Stripe Rendering -->
    <rect x="590" y="380" width="140" height="100" class="box"/>
    <text x="660" y="405" text-anchor="middle" class="sub-label">StripeCurve</text>
    <text x="610" y="425" class="tech-label">Bezier curve tube</text>
    <text x="610" y="443" class="tech-label">Debug markers</text>
    <text x="610" y="461" class="tech-label">Color + opacity</text>
  </g>

  <!-- Camera and Controls -->
  <g id="camera">
    <rect x="780" y="330" width="370" height="170" class="box-emerald"/>
    <text x="965" y="360" text-anchor="middle" class="label">Camera and Controls</text>

    <rect x="800" y="380" width="160" height="100" class="box"/>
    <text x="880" y="405" text-anchor="middle" class="sub-label">Camera</text>
    <text x="820" y="425" class="tech-label">Position: [0, 2, 8]</text>
    <text x="820" y="443" class="tech-label">FOV: 50 degrees</text>
    <text x="820" y="461" class="tech-label">Helmet scale: 0.35</text>

    <rect x="980" y="380" width="150" height="100" class="box"/>
    <text x="1055" y="405" text-anchor="middle" class="sub-label">OrbitControls</text>
    <text x="1000" y="425" class="tech-label">Pan/Zoom/Rotate</text>
    <text x="1000" y="443" class="tech-label">Min dist: 4, Max: 12</text>
    <text x="1000" y="461" class="tech-label">Target: [0, 0, 0]</text>
  </g>

  <!-- State Management -->
  <g id="state">
    <text x="100" y="550" class="section-title">State Management (Zustand)</text>

    <rect x="50" y="570" width="350" height="140" class="box-highlight"/>
    <text x="225" y="600" text-anchor="middle" class="label">helmetStore.ts</text>

    <text x="70" y="630" class="sub-label">Config State:</text>
    <text x="70" y="650" class="tech-label">shell: { color, finish }</text>
    <text x="70" y="668" class="tech-label">facemask: { color, finish }</text>
    <text x="70" y="686" class="tech-label">chinstrap, padding, hardware...</text>

    <text x="230" y="630" class="sub-label">Pattern State:</text>
    <text x="230" y="650" class="tech-label">type: stripe_single | stripe_double</text>
    <text x="230" y="668" class="tech-label">color: #hex</text>
    <text x="230" y="686" class="tech-label">intensity: 0.0 - 1.0</text>
  </g>

  <!-- UI Components -->
  <g id="ui">
    <rect x="430" y="570" width="350" height="140" class="box"/>
    <text x="605" y="600" text-anchor="middle" class="label">UI Components (4-Step)</text>

    <text x="450" y="630" class="tech-label">Step 1: Zone Color Selection</text>
    <text x="450" y="650" class="tech-label">Step 2: Material Finish (4 types)</text>
    <text x="450" y="670" class="tech-label">Step 3: Stripe Pattern</text>
    <text x="450" y="690" class="tech-label">Step 4: Logo (coming soon)</text>

    <text x="630" y="630" class="tech-label">ColorSelector + HSL</text>
    <text x="630" y="650" class="tech-label">MaterialFinishSelector</text>
    <text x="630" y="670" class="tech-label">PatternTypeSelector</text>
    <text x="630" y="690" class="tech-label">12 CFB team presets</text>
  </g>

  <!-- Export/Save -->
  <g id="export">
    <rect x="810" y="570" width="340" height="140" class="box-orange"/>
    <text x="980" y="600" text-anchor="middle" class="label">Export and Persistence</text>

    <text x="830" y="630" class="tech-label">Screenshot capture (planned)</text>
    <text x="830" y="650" class="tech-label">GLB export (planned)</text>
    <text x="830" y="670" class="tech-label">Save to Supabase (planned)</text>
    <text x="830" y="690" class="tech-label">Reset to defaults</text>
  </g>

  <!-- Arrows -->
  <line x1="225" y1="570" x2="225" y2="500" class="arrow-green"/>
  <text x="235" y="535" class="tech-label" style="fill: #10b981;">Real-time sync</text>

  <line x1="400" y1="640" x2="430" y2="640" class="arrow"/>

  <!-- Data Flow -->
  <g id="dataflow">
    <text x="100" y="760" class="section-title">Data Flow</text>

    <rect x="50" y="780" width="1100" height="90" class="box"/>

    <rect x="80" y="800" width="130" height="50" class="box-highlight"/>
    <text x="145" y="822" text-anchor="middle" class="sub-label">User Input</text>
    <text x="145" y="838" text-anchor="middle" class="tech-label">Color/Finish/Stripe</text>

    <rect x="250" y="800" width="130" height="50" class="box-emerald"/>
    <text x="315" y="822" text-anchor="middle" class="sub-label">Zustand</text>
    <text x="315" y="838" text-anchor="middle" class="tech-label">State Update</text>

    <rect x="420" y="800" width="130" height="50" class="box-cyan"/>
    <text x="485" y="822" text-anchor="middle" class="sub-label">R3F Canvas</text>
    <text x="485" y="838" text-anchor="middle" class="tech-label">useEffect sync</text>

    <rect x="590" y="800" width="130" height="50" class="box-purple"/>
    <text x="655" y="822" text-anchor="middle" class="sub-label">Material</text>
    <text x="655" y="838" text-anchor="middle" class="tech-label">Property apply</text>

    <rect x="760" y="800" width="130" height="50" class="box-orange"/>
    <text x="825" y="822" text-anchor="middle" class="sub-label">3D Render</text>
    <text x="825" y="838" text-anchor="middle" class="tech-label">60fps output</text>

    <rect x="930" y="800" width="100" height="50" class="box-red"/>
    <text x="980" y="822" text-anchor="middle" class="sub-label">DB</text>
    <text x="980" y="838" text-anchor="middle" class="tech-label">Persist</text>

    <line x1="210" y1="825" x2="250" y2="825" class="arrow"/>
    <line x1="380" y1="825" x2="420" y2="825" class="arrow-green"/>
    <line x1="550" y1="825" x2="590" y2="825" class="arrow"/>
    <line x1="720" y1="825" x2="760" y2="825" class="arrow"/>
    <line x1="890" y1="825" x2="930" y2="825" class="arrow-dashed"/>

    <text x="600" y="865" text-anchor="middle" class="sub-label">Real-time material updates | Stripe Bezier curve rendering</text>
  </g>

</svg>
